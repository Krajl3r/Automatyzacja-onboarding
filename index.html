<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Onboarding - Akceptacja Oferty</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 50px auto; padding: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input, select, textarea { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
        button { background: #007cba; color: white; padding: 12px 30px; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; }
        button:hover { background: #005a87; }
        .checkbox-group { margin: 10px 0; }
        .checkbox-group label { font-weight: normal; display: inline-block; margin-left: 5px; }
    </style>
</head>
<body>
    <h1></h1>
    <form id="onboardingForm">
        <div class="form-group">
            <label for="companyName">Nazwa firmy *</label>
            <input type="text" id="companyName" name="companyName" required>
        </div>

        <div class="form-group">
            <label for="nip">NIP *</label>
            <input type="text" id="nip" name="nip" required>
        </div>

        <div class="form-group">
            <label for="address">Adres *</label>
            <textarea id="address" name="address" required></textarea>
        </div>

        <div class="form-group">
            <label for="contactPerson">Osoba kontaktowa *</label>
            <input type="text" id="contactPerson" name="contactPerson" required>
        </div>

        <div class="form-group">
            <label for="contactEmail">Email *</label>
            <input type="email" id="contactEmail" name="contactEmail" required>
        </div>

        <div class="form-group">
            <label for="contactPhone">Telefon</label>
            <input type="tel" id="contactPhone" name="contactPhone">
        </div>

        <div class="form-group">
            <label for="reportingMethod">Sposób prowadzenia raportów *</label>
            <select id="reportingMethod" name="reportingMethod" required>
                <option value="">-- Wybierz --</option>
                <option value="online">Online</option>
                <option value="paper">Papier</option>
            </select>
        </div>

        <div class="form-group">
            <label>Dokumenty (URL do plików)</label>
            <input type="text" name="licenseDoc" placeholder="URL licencji">
            <input type="text" name="insuranceDoc" placeholder="URL OC" style="margin-top: 5px;">
            <input type="text" name="driverTestsDoc" placeholder="URL badań kierowców" style="margin-top: 5px;">
        </div>

        <div class="form-group">
            <label>Potrzeby dodatkowe</label>
            <div class="checkbox-group">
                <input type="checkbox" id="needsIMI" name="needsIMI" value="true">
                <label for="needsIMI">IMI</label>
            </div>
            <div class="checkbox-group">
                <input type="checkbox" id="needsForeignPayroll" name="needsForeignPayroll" value="true">
                <label for="needsForeignPayroll">Płace zagraniczne</label>
            </div>
            <div class="checkbox-group">
                <input type="checkbox" id="needsReminders" name="needsReminders" value="true">
                <label for="needsReminders">Przypomnienia</label>
            </div>
        </div>

        <div class="form-group">
            <label for="meetingTime">Termin rozmowy *</label>
            <input type="datetime-local" id="meetingTime" name="meetingTime" required>
        </div>

        <button type="submit">Akceptuję ofertę i przechodzę do onboardingu</button>
    </form>

    <script>
        document.getElementById('onboardingForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitButton = e.target.querySelector('button');
            const originalText = submitButton.textContent;
            submitButton.textContent = 'Wysyłanie...';
            submitButton.disabled = true;

            // Zbieranie danych z formularza
            const formData = new FormData(this);
            const jsonData = {};
            
            for (const [key, value] of formData.entries()) {
                // Dla checkboxów - konwersja na boolean
                if (value === 'true') {
                    jsonData[key] = true;
                } else if (value === 'false') {
                    jsonData[key] = false;
                } else {
                    jsonData[key] = value;
                }
            }

            try {
                const response = await fetch('https://hook.eu2.make.com/1ovff2hnkp66fedinlsuryfsvq8le5vg', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(jsonData)
                });

                if (response.ok) {
                    alert('Formularz został pomyślnie wysłany! Skontaktujemy się z Tobą w wybranym terminie.');
                    this.reset();
                } else {
                    throw new Error('Błąd podczas wysyłania');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('Wystąpił błąd podczas wysyłania formularza. Spróbuj ponownie.');
            } finally {
                submitButton.textContent = originalText;
                submitButton.disabled = false;
            }
        });
    </script>
</body>
</html>

