<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formularz Onboardingowy</title>
</head>
<body>
    <h1>Formularz Onboardingowy</h1>
    <form id="onboardingForm">
        <label for="nip">NIP:</label><br>
        <input type="text" id="nip" name="nip" placeholder="Wprowadź NIP" required><br><br>

        <label for="address">Adres firmy:</label><br>
        <input type="text" id="address" name="address" placeholder="Wprowadź adres firmy" required><br><br>

        <label for="contactPerson">Osoba kontaktowa:</label><br>
        <input type="text" id="contactPerson" name="contactPerson" placeholder="Wprowadź imię i nazwisko" required><br><br>

        <label for="documents">Załącz dokumenty:</label><br>
        <input type="file" id="documents" name="documents" multiple required><br>
        <small>Załącz licencję, OC, badania kierowców</small><br><br>

        <label for="reporting">Sposób prowadzenia raportów kierowców:</label><br>
        <select id="reporting" name="reporting" required>
            <option value="papier">Papier</option>
            <option value="online">Online</option>
        </select><br><br>

        <label for="needs">Deklarowane potrzeby:</label><br>
        <input type="checkbox" id="imi" name="needs" value="IMI"> IMI<br>
        <input type="checkbox" id="foreignWages" name="needs" value="Płace Zagraniczne"> Płace Zagraniczne<br>
        <input type="checkbox" id="reminders" name="needs" value="Przypomnienia"> Przypomnienia<br><br>

        <label for="meeting">Wybierz termin rozmowy:</label><br>
        <input type="datetime-local" id="meeting" name="meeting" required><br><br>

        <button type="submit">Zapisz dane</button>
    </form>

    <script>
        const onboardingFormWebhookURL = 'https://hook.eu2.make.com/1ovff2hnkp66fedinlsuryfsvq8le5vg'; // Podmień na URL webhooka dla formularza onboardingowego

        document.getElementById('onboardingForm').addEventListener('submit', function(event) {
    event.preventDefault();

    const formData = new FormData(this);
    const data = {};

    formData.forEach((value, key) => {
        if (key === 'needs') {
            // Jeśli klucz to "needs", dodaj wartości oddzielone przecinkami
            if (!data[key]) {
                data[key] = value;
            } else {
                data[key] += `,${value}`;
            }
        } else {
            data[key] = value;
        }
    });

    // Wyślij dane do Google Sheets (formularz onboardingowy)
    fetch(onboardingFormWebhookURL, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(data)
    })
    .then(response => {
        if (response.ok) {
            alert('Dane zostały wysłane do Google Sheets (Formularz Onboardingowy).');
        } else {
            alert('Wystąpił błąd podczas wysyłania danych (Formularz Onboardingowy).');
        }
    });
});
</script>
</body>

</html>
